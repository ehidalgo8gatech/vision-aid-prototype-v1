generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["referentialIntegrity"]
}

datasource db {
  provider             = "mysql"
  url                  = env("DATABASE_URL")
  referentialIntegrity = "prisma"
}

model PatientInformation {
  id                        Int                         @id @default(autoincrement())
  date                      DateTime
  sessionNumber             Int
  mrn                       String
  beneficiaryName           String
  age                       Int
  gender                    String
  pNumber                   String?
  Education                 String
  Occupation                String
  Districts                 String
  State                     String
  Diagnosis                 String
  hospitalId                Int
  beneficiary_subcategories Beneficiary_Subcategories[]
}

model User {
  id           Int           @id @default(autoincrement())
  email        String        @unique
  admin        Admin?
  hospitalRole HospitalRole?
}

model Admin {
  id     Int  @id @default(autoincrement())
  user   User @relation(fields: [userId], references: [id])
  userId Int  @unique // relation scalar field (used in the `@relation` attribute above)
}

model Hospital {
  id           Int            @id @default(autoincrement())
  name         String         @unique
  hospitalRole HospitalRole[]
}

model HospitalRole {
  id         Int      @id @default(autoincrement())
  user       User     @relation(fields: [userId], references: [id])
  userId     Int      @unique // relation scalar field (used in the `@relation` attribute above)
  hospital   Hospital @relation(fields: [hospitalId], references: [id])
  hospitalId Int // relation scalar field (used in the `@relation` attribute above)
  admin      Boolean
}

model Beneficiary {
  id                        Int                         @id @default(autoincrement())
  date                      DateTime
  sessionNumber             Int
  mrn                       String
  beneficiaryName           String
  age                       Int
  gender                    String
  pNumber                   String?
  Education                 String
  Occupation                String
  Districts                 String
  State                     String
  Diagnosis                 String
  hospitalId                Int
  beneficiary_subcategories Beneficiary_Subcategories[]
}

model Computer_Training {
  id                        Int                         @id @default(autoincrement())
  date                      DateTime
  sessionNumber             Int
  mrn                       String
  beneficiaryName           String
  age                       Int
  gender                    String
  pNumber                   String?
  Education                 String
  Occupation                String
  Districts                 String
  State                     String
  Diagnosis                 String
  hospitalId                Int
  beneficiary_subcategories Beneficiary_Subcategories[]
}

model Mobile_Training {
  id                        Int                         @id @default(autoincrement())
  date                      DateTime
  sessionNumber             Int
  beneficiaryName           String
  age                       Int
  gender                    String
  pNumber                   String?
  Education                 String
  Occupation                String
  Districts                 String
  State                     String
  Vision                    String
  hospitalId                Int
  beneficiary_subcategories Beneficiary_Subcategories[]
}

model Orientation_Mobility_Training {
  id                        Int                         @id @default(autoincrement())
  date                      DateTime
  sessionNumber             Int
  mrn                       String
  beneficiaryName           String
  age                       Int
  gender                    String
  pNumber                   String?
  Education                 String
  Occupation                String
  Districts                 String
  State                     String
  Diagnosis                 String
  hospitalId                Int
  beneficiary_subcategories Beneficiary_Subcategories[]
}

model Vision_Enhancement {
  id                        Int                         @id @default(autoincrement())
  date                      DateTime
  sessionNumber             Int
  mrn                       String
  beneficiaryName           String
  age                       Int
  gender                    String
  pNumber                   String?
  Districts                 String
  Diagnosis                 String
  MDVI                      String
  hospitalId                Int
  beneficiary_subcategories Beneficiary_Subcategories[]
}

model Counselling_Education {
  id                        Int                         @id @default(autoincrement())
  date                      DateTime
  sessionNumber             Int
  mrn                       String
  beneficiaryName           String
  age                       Int
  gender                    String
  pNumber                   String?
  Districts                 String
  Diagnosis                 String
  typeCounselling           String
  hospitalId                Int
  beneficiary_subcategories Beneficiary_Subcategories[]
}

model Camps {
  id                        Int                         @id @default(autoincrement())
  date                      DateTime
  schoolName                String
  studentName               String
  age                       Int
  gender                    String
  Diagnosis                 String
  visualAcuityRE            String
  visualAcuityLE            String
  unaidedNearVision         String
  refractionVALE            String
  LVA                       String
  LVANear                   String
  nonOpticalAid             String
  actionNeeded              String
  hospitalId                Int
  beneficiary_subcategories Beneficiary_Subcategories[]
}

model School_Screening {
  id                        Int                         @id @default(autoincrement())
  date                      DateTime
  typeCamp                  String
  screeningPlace            String
  organiser                 String
  contactNumber             Int
  address                   String
  screenedTotal             Int
  refractiveErrors          Int
  spectaclesDistributed     Int
  checked                   String
  refer                     Int
  staff                     Int
  lowVision                 Int
  hospitalId                Int
  beneficiary_subcategories Beneficiary_Subcategories[]
}

model Categories {
  id           Int             @id @default(autoincrement())
  categoryName String
  subcategory  Subcategories[]
}

model Subcategories {
  id                        Int                         @id @default(autoincrement())
  subcategoryName           String
  category                  Categories                  @relation(fields: [categoryId], references: [id])
  categoryId                Int
  beneficiary_subcategories Beneficiary_Subcategories[]
}

model Beneficiary_Subcategories {
  beneficiary                     Beneficiary                   @relation(fields: [beneficiaryId], references: [id])
  beneficiaryId                   Int                           @id
  subcategory                     Subcategories                 @relation(fields: [subcategoryId], references: [id])
  subcategoryId                   Int
  computer_training               Computer_Training             @relation(fields: [computer_trainingId], references: [id])
  computer_trainingId             Int
  mobile_training                 Mobile_Training               @relation(fields: [mobile_trainingId], references: [id])
  mobile_trainingId               Int
  orientation_mobility_training   Orientation_Mobility_Training @relation(fields: [orientation_mobility_trainingId], references: [id])
  orientation_mobility_trainingId Int
  vision_enhancement              Vision_Enhancement            @relation(fields: [vision_enhancementId], references: [id])
  vision_enhancementId            Int
  counselling_education           Counselling_Education         @relation(fields: [counselling_educationId], references: [id])
  counselling_educationId         Int
  camps                           Camps                         @relation(fields: [campsId], references: [id])
  campsId                         Int
  school_screening                School_Screening              @relation(fields: [school_screeningId], references: [id])
  school_screeningId              Int
  pi                              PatientInformation            @relation(fields: [piId], references: [id])
  piId                            Int
}
